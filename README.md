# driversBlog
Задачи для курса OTUS "Web-разработчик на Python".

**Задание №4 - Сайт "Мой блог" для курса OTUS "Web-разработчик на Python".**


**Смысл:**
Для того чтобы работать с SQLAlchemy в проектах с базой данных. Понимать как работать с orm.

**Цель:**
Создать модели данных для сайта "Мой блог" на тему "Блог водителей" (driversBlog):
1. Создать модели данных для блога, например (Post, User, ...).
2. Создать связи между моделями.
3. Работать с сессией (ввести данные в БД через ORM).
4. Делать простые запросы (в виде тестов pytest, можно просто с помощью print):
   - Выбрать все посты конкретного пользователя с 2-мя любыми тегами.
   - Сделать другие запросы.
   
**Реализовано:**
 - *Модели:*
   - User ("Пользователь" - содержит информацию о пользователе).
   - Post ("Пост" - посты пользователя).
   - Tag ("Тэг" - тэги поста).
   - WritersLevel ("Уровень писателя" - зависит от количества постов пользователя).
 - *Связи между моделями:*
   - Пользователь (User) может иметь только один уровень писателя (WritersLevel) 
     и иметь несклько постов (Post).
   - У одного поста (Post) может быть несколько тэгов (Tag),
     каждый тэг может быть связан с разными постами.
   - У каждого пользователя может быть только один уровень (WritersLevel),
     один уровень могут иметь разные пользователи.
 - *Добавлены данные в БД через ORM:*
   - о пользователях, постах, тегах и уровне писателя.
 - *Созданы выборки данных из БД:*
   - все посты конкретного пользователя с 2-мя указанными тегами - 
     all_user_posts_with_2tags(nickname пользователя, название тега1, название тэга2).
   - поиск тэга по названию - find_tag(название тэга).
   - список всех пользователей - select_all_users.
 - *При создании поста возможно обновление уровня писателя пользователя:*
   - обновление уровня писателя для всех пользователей, кроме тех, 
     у которых уровень="Админ" происходит если новое рассчетное значение уровня 
     не совпадает с текущим уровнем пользователя:
     - level = "Новичок" установливается при создании и не меняется, пока пользователь не создаст 2-й пост.
     - level =  "Бывалый" если у пользователя 2 или 3 поста.
     - level = "Эксперт" если у пользователя 4 и более постов.
   
 - *Проверки с использованием **pytest**:*
   - проверка успешного добавления нового пользователя в систему.

**Установка:**
 - Для установки нужно создать корневой репозиторий:
   
   *driversBlog*
   
 - перейти в корневой репозиторий и склонировать проект: 
   
   *git clone https://github.com/julissel/driversBlog.git*

 - создать виртуальное окружение:
   
   *python3 -m venv myenv*

 - активировать окружение:

   *source myenv/bin/activate*
 
 - установить зависимости:

   *pip install -r requirements.txt*

 - запустить:

   *python3 -m driversBlog*

 - для запуска тестов:
   
   *pytest driversBlog/tests/unit/*
   
 - после взаимодействия с приложением выйти из виртуального окружения:
   
   *deactivate*